
# Conexion con la Base de Datos

Para conectar nuestra base de datos a nuestra API con .NET debemos crear una clase que se llame `AppDbContext.cs` la cual debe heredar las funcionalidades de `DbContext` la cual forma parte del `Microsoft.EntityFrameworkCore` , luego debemos crear un constructor

## Creacion DbContext

```c#
using Microsoft.EntityFrameworkCore;
using <nombre_proyecto>.Models

namespace <nombre_proyecto>.Db; // Db o Data por ser el nombre de la carpeta
{
    public class AppDbContext : DbContext
    {
        public AppDbContext(DbContextOptions<AppDbContext> options)
        : base(options)
        {
        }
        public DbSet<{nombre_model}> {nombre_tabla} { get; set; } 
        public DbSet<{nombre_model}> {nombre_tabla} { get; set; }
        // Se pueden tener mas
    }
}
```

En el `DbSet` lo que se pone entre brackets es el nombre de la clase del modelo y luego va el nombre de la tabla que va a quedar asignado a ese modelo

### Connection String

```c#
"Server=localhost;Database=<DB_NAME>;Integrated Security=false;User Id=<USERNAME>;Password=<USER PASSWORD>;TrustServerCertificate=True;Encrypt=False;"
```

### Registrar DbContext

Se debe registrar el `AppDbContext` en nuestro `Program.cs` como un *servicio* junto con su Connection String.

```c#
// incluirlo con using <nombre_proyecto>.Db o .Data

builder.Services.AddDbContext<AppDbContext>(
    option => option.UseSqlServerbuilder.Configuration.GetConnectionString("Connection")
);
```